spring:
  cloud:
    gateway:
      routes:
        # --- 1. Auth Service Route ---
        # Public endpoints (login/register/validate)
        - id: auth-service
          uri: http://localhost:8080
          predicates:
            - Path=/auth-service/api/v1/auth/**

        # --- 2. User Service Route ---
        # Protected endpoints requiring a valid JWT
        - id: user-service
          uri: http://localhost:8081
          predicates:
            - Path=/user-service/api/v1/users/**
          filters:
            - AuthenticationFilter

        # --- 3. Course Service Route ---
        - id: course-service
          uri: http://localhost:8082
          predicates:
            - Path=/course-service/api/v1/courses/**
          filters:
            - AuthenticationFilter

        # --- 4. Order Service Route (NEW) ---
        # Routes checkout and order history requests
        - id: order-service
          uri: http://localhost:8084
          predicates:
            - Path=/order-service/api/v1/orders/**
          filters:
            - AuthenticationFilter

app:
  services:
    # URL for token validation in auth-service
    auth-validation-url: http://localhost:8080/auth-service/api/v1/auth/validate